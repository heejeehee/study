<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<form id="myForm" method="get" action="calc">
		<input type="number" name="num1">
		<select name="sel">
			<option name="plus" value="plus">+</option>
			<option name="minus" value="minus">-</option>
		</select>
		<input type="number" name="num2">
		=
		<input type="text" name="result" readonly>
		<br>
		<button type="submit">계산</button>
		<img src="https://png.pngtree.com/thumb_back/fh260/background/20230609/pngtree-three-puppies-with-their-mouths-open-are-posing-for-a-photo-image_2902292.jpg">
	</form>
	
	<script>
		document.querySelector("button").addEventListener("click", function(event){
			event.preventDefault();
			doCalc();
		})
		
		function doCalc(){
			console.log("doCalc 실행");
			let num1 = document.getElementsByName("num1")[0].value;
			let num2 = document.getElementsByName("num2")[0].value;
			let sel = document.getElementsByName("sel")[0].value;
			// 주소창의 +는 띄어쓰기로 인식됨
			// encodeURIComponent(더하기에 해당하는 변수) = %2B			
			// ajax 객체 생성
            let xhr = new XMLHttpRequest();
            // 보낼 준비
            xhr.open("get", "calc?num1="+num1+"&num2="+num2+"&sel="+sel);

            // 보내기(단! 언제 끝날지 모름)
            xhr.send();
            
             // 다녀온 후(응답 이후)
            xhr.onload = function () {
                // 받아온 내용이 저장되는 곳
                let data = xhr.responseText;
                console.log(data);
                document.getElementsByName("result")[0].value = data;
            }
		}
	</script>
</body>
</html>